<!DOCTYPE html>

<html>

<head>
    <title>Справка PMX</title>
    <style>
        ul {
            list-style: outside;
        }

        li {
            text-align: justify;
        }

        p {
            text-align: justify;
        }

        hr {
            width: 100%;
            text-align: centre;
            margin-top: 2%;
            margin-bottom: 2%;
        }

        img {
            width: 100%;
        }
    </style>
    <script>
        document.write("<style> ");
        document.write("a { color: " + Android.getLinkColor() + ";}");
        document.write("ul { padding-left: " + Android.getBulletPadding() + ";}");
        document.write("p { margin-top: " + Android.getParaMargin() + ";");
        document.write("margin-bottom: " + Android.getParaMargin() + ";}");
        document.write("img { max-width: " + Android.getImgMaxWidth() + ";}");
        document.write("</style>");
    </script>
</head>

<body>
    <script type="text/javascript">
        document.body.style.backgroundColor = Android.getBgColor();
        document.body.style.color = Android.getTextColor();
    </script>

    <h2>Часто задаваемые вопросы (FAQ)</h2>
    <ul>
        <li style="margin-bottom:10px">
            <p><b>Почему требуется ROOT или ADB оболочка?</b></p>
            <p>Android не позволяет пользовательским приложениям изменять разрешения манифеста и AppOps. Чтение AppOps без ROOT или ADB
                 возможно при условии, что скрытые API-интерфейсы не занесены в черный список на вашем устройстве, что <a
                    href="https://developer.android.com/distribute/best-practices/develop/restrictions-non-sdk-interfaces"> очень
                     маловероятно </a> на Android 9+.
            </p>
            <p>Поэтому мы запускаем отдельный демон с высокими привилегиями для того, чтобы обойти ограничения.</p>
            <p>По умолчанию демон запускается с ADB UID (2000) или (при наличии ROOT) System UID (1000). Однако на некоторых прошивках функциональность
                 может быть нарушена из-за отсутствия разрешений.</p>
            <p>На устройствах с ROOT UID можно изменить в <b><i>Дополнительных настройках</i></b>.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Как включить ADB по сети?</b></p>
            <p>В некоторых устройствах есть параметр <b><i>ADB по сети</i></b> или <b><i>Беспроводная отладка</i></b> в настройке                <i>Для разработчиков</i>. На других вам нужно запустить команду <b><i>adb tcpip 5555</i></b> с ПК с
                устройством, подключенным по USB.
            </p>
            <p>Для получения более подробной информации смотрите <a href="https://developer.android.com/studio/command-line/adb#wireless">это</a>
                и <a href="https://android.stackexchange.com/a/216474">это</a>.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Почему требуются разрешения GET_APP_OPS_STATS и INTERNET?</b></p>
            <p>Для просмотра AppOps требуется GET_APP_OPS_STATS при условии, что скрытые API работают.</p>
            <p>Разрешение INTERNET требуется для использования ADB по сети. Единственное соединение, созданное вне устройства
                 это проверка обновлений.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Почему в списке пакетов я не вижу приложение XYZ?</b></p>
            <p>Пожалуйста, проверьте <i>Фильтры исключений</i>. По умолчанию практически все стандартные Android приложения исключены.
                Вы можете исключить/включить любой пакет, который хотите из/в списке видимых.
            </p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Почему я не вижу разрешения XYZ в пакете/приложении ABC?</b></p>
            <p>Пожалуйста, проверьте <i>Фильтры исключений</i>.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Почему я не вижу AppOps XYZ в пакете/приложении ABC?</b></p>
            <p>Пожалуйста, проверьте <i>Фильтры исключений</i>.</p>
            <p>Или же пакет ABC может не использовать операцию XYZ. Вам не нужно беспокоиться об этом.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Что такое <i>недопустимые разрешения</i> в «Фильтрах исключений»?</b></p>
            <p>Если приложение запрашивает разрешение манифеста, но оно не объявлено (предоставлено) платформой Android или                  любым из установленных пакетов, это недопустимое разрешение.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Что такое <i>дополнительные AppOps</i> в «Фильтрах исключений»?</b></p>
            <p>Не все AppOps используются для всех установленных приложений. Но вы можете принудительно применить AppOp к любому приложению. Выбранные дополнительные AppOps отображаются в списках разрешений всех приложений, и вы можете использовать их при настройке.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Почему я не могу изменить разрешение XYZ?</b></p>
            <p>Можно изменять разрешения манифеста только с уровнем защиты <i>Опасный</i> (и несколько других).
                Можно изменять только AppOps, которые не зависят от некоторых других AppOp. Кроме того, некоторые критически важные приложения
                защищены; изменение их может привести к «окирпичиванию» устройства.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Как использовать приложение в рабочем профиле/многопользовательской среде?</b></p>
            <p>Версия из Play Store поддерживает рабочие профили и несколько пользователей. Выберите пользователя в меню.</p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Какие существуют режимы AppOps и какие мне следует использовать?</b></p>
            <p>Обычно вам следует использовать варианты <i>Разрешить</i> или <i>Игнорировать</i>. Или же вы можете разрешить операцию только тогда, когда
                 приложение находится на <i>переднем плане</i> (только на андроид Pie +). <i>Запретить</i> — это интенсивная версия <i>Игнорировать</i>, которая
                 может привести к сбою запрашивающего приложения. <i>По умолчанию</i> — это поведение системы по умолчанию, которое отличается для
                 разных AppOps.</p>
            <p>Официальная документация: <a
                    href="https://developer.android.com/reference/android/app/AppOpsManager#access-control">AppOpsManager</a>.
            </p>
        </li>
        <li style="margin-bottom:10px">
            <p><b>Почему сканирование приложений занимает так много времени?</b></p>
            <p>
                Permission Manager X получает много информации о приложениях. Туда входят название приложения, имя пакета, иконка, UID и его состояние
                 (фреймворк, системное, пользовательское, заморожено). Для разрешений манифеста и AppOp информация включает
                 имя разрешения, его состояние (предоставлено, отозвано, разрешить, игнорировать, запретить, передний план, по умолчанию), уровень защиты
                 (нормальный, опасный, подпись, разработка, привилегированный, фиксированный, AppOp) и время последнего доступа AppOp. Затем значение каждого разрешения сравнивается с целевым значением и устанавливается индикатор его состояния (красный, зеленый или оранжевый). После сканирования всех разрешений у каждого приложения в общем списке отображается счётчик видимых / всех разрешений манифеста и AppOps и его статус соответствия целевым значениям.
            </p>
            <p>
                Вы можете включить <i>Быстрое сканирование</i> в настройках, чтобы отключить сканирование разрешений. Или исключите как можно больше информации
                во вкладке <i>Фильтры исключений</i> для ускорения процесса сканирования. Скорость также зависит от
                 сколько мощности ЦП и какое количество ОЗУ ваше устройство оставляет для приложений. Прошивки, выделяющие больше мощности на пользовательский интерфейс (например, MIUI), работают медленнее.
            </p>
        </li>
    </ul>

    <hr />

    <h2>Целевые значения</h2>
    <p>
        Для каждого разрешения вы можете установить целевые значения, которые можно забэкапить и восстановить при смене прошивки или устройства.
        Таким образом, вам понадобится всего несколько минут, чтобы просмотреть все установленные пакеты и выяснить, какие разрешения
        некорректно настроены. Долгим нажатием на разрешение можно установить или очистить его целевое значение.
    </p>

    <ul>
        <li>
            <p>
                <font color="#FFC107"><b>Оранжевый</b></font> означает, что целевое значение разрешения не установлено
            </p>
        </li>
        <li>
            <p>
                <font color="#90EE90"><b>Зелёный</b></font> означает, что текущее значение соответствует целевому
            </p>
        </li>
        <li>
            <p>
                <font color="#FF0000"><b>Красный</b></font> означает, что текущее и целевое значения различаются
            </p>
        </li>
    </ul>

    <hr>

    <h2>Пакеты</h2>
    <img src="pkg.webp">
    <ul>
        <li>
            <p>Цветная полоска слева — <b>индикатор целевых значений</b></p>
        </li>
        <li>
            <p>Первая строка показывает <b>название</b> приложения</p>
        </li>
        <li>
            <p>Вторая строка показывает <b>имя пакета</b> и <b>UID</b></p>
        </li>
        <li>
            <p>Третья строка (необязательно) показывает состояние пакета: <b>критическое</b> (фреймворк), <b> фреймворк </b> или
                <b>системное</b> приложение. Также, если приложение <b>заморожено</b>. Состояния <b>включено/незаморожено</b>, <b>пользовательское</b>
                не отображаются.
            </p>
        </li>
        <li>
            <p>
                Последняя строка показывает <b>количество</b> видимых разрешений из общего манифеста и разрешений AppOps.
                Невидимые разрешения - это те, которые исключены в <i>Фильтре исключений</i>.
            </p>
            <p>При использовании быстрого сканирования эта строка показывает <b>UID</b> пакета.</p>
        </li>
    </ul>

    <hr>

    <h2>Разрешения</h2>
    <img src="perm_ru.webp">
    <ul>
        <li>
            <p>Цветная полоска слева — <b>индикатор целевого значения</b></p>
        </li>
        <li>
            <p>Первая строка показывает <b>имя разрешения</b></p>
        </li>
        <li>
            <p>Вторая строка показывает <a
                    href="https://developer.android.com/reference/android/R.attr#protectionLevel">уровень защиты</a> разрешений:
                <b>нормальный</b>, <b>опасный</b>, <b>подпись</b>, <b>разработка</b>, <b>привилегированное</b>, <b>фиксированные</b>,
                <b>AppOps</b> или <b>неизвестно</b>. Также, если AppOp <b>по пакету</b> or <b>по UID</b>. И если это
                <b>дополнительный</b> AppOp (никогда не исключается в настройках фильтра).
            </p>
        </li>
        <li>
            <p>Третья строка (в случае с AppOp) показывает <b>время последнего доступа</b></p>
        </li>
        <li>
            <p>Четвертая строка (в случае с AppOp) показывает целевое значение, если оно не совпадает с текущим.</p>
        </li>
        <li>
            <p>Если AppOp никогда не устанавливался/не настраивался, под текущим установленным значением отображается словосочетание <b><i>по умолчанию</i></b>.
            </p>
        </li>
    </ul>

    <hr>

    <h2>Поиск</h2>
    <img src="search_ru.webp">
    <p style="margin-top:10px">
        Обычно метка пакета, имя и UID ищутся из видимого списка.
    </p>
    <p>
        При глубоком поиске запрашиваются имена разрешений и другие параметры.
    </p>
    <p>
        Обратите внимание, что фильтры исключения эффективны при поиске.
    </p>
    <p>
        Вы можете использовать в поиске следующие специальные ключевые слова:
    </p>
    <ul>
        <li>
            <p>Состояние приложения:</p>
            <p><b><i>:Критический :Фреймворк :Система :Пользователь :Заморожено</i></b></p>
        </li>
        <li>
            <p>Индикатор целевого значения:</p>
            <p><b><i>:АПЕЛЬСИН :ЗЕЛЕНЫЙ :КРАСНЫЙ</i></b></p>
        </li>
        <li>
            <p>Уровень защиты разрешений:</p>
            <p><b><i>:Нормальный :Опасный :Подпись :разработка :Привилегированный :Фиксированный :AppOps :Неизвестно</i></b></p>
        </li>
        <li>
            <p>По UID AppOps:</p>
            <p><b><i>:UID</i></b></p>
        </li>
        <li>
            <p>AppOps с последним временем доступа:</p>
            <p><b><i>:ВРЕМЯ</i></b></p>
        </li>
        <li>
            <p>Дополнительные AppOps (никогда не исключаются в настройках фильтра):</p>
            <p><b><i>:ДОПОЛНИТЕЛЬНЫЙ</i></b></p>
        </li>
        <li>
            <p>Операторы &amp; (AND), | (OR) и NOT (!):</p>
            <p><b><i>Foo|Bar&amp;Baz</i></b></p>
            <p><b><i>Foo&amp;!Bar&amp!Baz</i></b></p>
        </li>
    </ul>

    <hr>

    <h2>Нужна дополнительная помощь?</h2>
    <p>Пожалуйста, <a href="activity://about">свяжитесь с нами</a> по электронной почте или в Telegram.</p>

</body>

</html>